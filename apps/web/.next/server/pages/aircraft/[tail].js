"use strict";(()=>{var a={};a.id=359,a.ids=[220,359],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},19437:(a,b,c)=>{c.r(b),c.d(b,{config:()=>F,default:()=>B,getServerSideProps:()=>E,getStaticPaths:()=>D,getStaticProps:()=>C,handler:()=>N,reportWebVitals:()=>G,routeModule:()=>M,unstable_getServerProps:()=>K,unstable_getServerSideProps:()=>L,unstable_getStaticParams:()=>J,unstable_getStaticPaths:()=>I,unstable_getStaticProps:()=>H});var d={};c.r(d),c.d(d,{default:()=>y,getServerSideProps:()=>z});var e=c(25086),f=c(43600),g=c(27292),h=c(71203),i=c.n(h),j=c(67721),k=c.n(j),l=c(8732),m=c(82015),n=c(90604),o=c(18902),p=c(66923),q=c.n(p);let r=o.nkM,s=o.Zcv,t=o.hcu,u=o.zWC,v=o.sDd,w=o.iUU,x=q();function y({initialSummary:a,initialHistory:b,tail:c}){var d;let e=(0,n.useRouter)(),{tail:f}=e.query,g=Array.isArray(f)?f[0]:f||c,[h,i]=(0,m.useState)(a||null),[j,k]=(0,m.useState)(b||null),[p,q]=(0,m.useState)("summary"),[y,z]=(0,m.useState)(!a),A=async a=>{try{let b={"x-api-key":"demo-api-key","Content-Type":"application/json"};console.log("Fetching aircraft data for:",a);let[c,d]=await Promise.all([fetch(`http://192.168.3.1:3001/api/aircraft/${a}/summary`,{headers:b}),fetch(`http://192.168.3.1:3001/api/aircraft/${a}/history`,{headers:b})]);if(console.log("Summary response status:",c.status),console.log("History response status:",d.status),c.ok){let a=await c.json();console.log("Summary data:",a),i(a.summary)}else console.error("Summary request failed:",c.status,c.statusText);if(d.ok){let a=await d.json();console.log("History data:",a),k(a.history)}else console.error("History request failed:",d.status,d.statusText)}catch(a){console.error("Failed to fetch aircraft data:",a)}finally{z(!1)}};return y?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,l.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading aircraft data..."}),(0,l.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Tail: ",g||"undefined"]}),(0,l.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Router ready: ",e.isReady?"true":"false"]}),(0,l.jsx)("button",{onClick:()=>{console.log("Button clicked, forcing data load"),A("N123AB")},className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Force Load Data"})]})}):h?(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"flex items-center h-16",children:[(0,l.jsxs)(x,{href:"/",className:"flex items-center text-gray-600 hover:text-gray-900 mr-6",children:[(0,l.jsx)(r,{className:"h-5 w-5 mr-2"}),"Back to Search"]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(s,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:h.tail}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Aircraft Report"})]})]})]})})}),(0,l.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(w,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Registration"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:h.regStatus})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(t,{className:"h-8 w-8 text-red-600 mr-3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Accidents"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:h.ntsbAccidents})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(u,{className:"h-8 w-8 text-green-600 mr-3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Owners"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:h.owners})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded-full mr-3 flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-xs font-bold",children:"RS"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Risk Score"}),(0,l.jsx)("p",{className:`text-lg font-semibold px-2 py-1 rounded-full ${(d=h.riskScore)>=50?"text-red-600 bg-red-100":d>=25?"text-yellow-600 bg-yellow-100":"text-green-600 bg-green-100"}`,children:h.riskScore})]})]})})]}),(0,l.jsx)("div",{className:"flex justify-end space-x-4 mb-6",children:(0,l.jsxs)(x,{href:`/aircraft/${g}/report`,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,l.jsx)(w,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"Comprehensive Report"})]})}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,l.jsx)("div",{className:"border-b border-gray-200",children:(0,l.jsx)("nav",{className:"flex space-x-8 px-6",children:[{id:"summary",label:"Summary",icon:o.iUU},{id:"history",label:"History",icon:o.VvS},{id:"live",label:"Live Data",icon:o.sDd}].map(({id:a,label:b,icon:c})=>(0,l.jsxs)("button",{onClick:()=>q(a),className:`flex items-center py-4 px-1 border-b-2 font-medium text-sm ${p===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,l.jsx)(c,{className:"h-4 w-4 mr-2"}),b]},a))})}),(0,l.jsxs)("div",{className:"p-6",children:["summary"===p&&(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aircraft Information"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Registration Status"}),(0,l.jsx)("p",{className:"font-medium",children:h.regStatus})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Airworthiness"}),(0,l.jsx)("p",{className:"font-medium",children:h.airworthiness})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Open AD Directives"}),(0,l.jsx)("p",{className:"font-medium",children:h.adOpenCount})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"NTSB Accidents"}),(0,l.jsx)("p",{className:"font-medium",children:h.ntsbAccidents})]})]})]})}),"history"===p&&j&&(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ownership History"}),(0,l.jsx)("div",{className:"space-y-4",children:j.owners.map((a,b)=>(0,l.jsx)("div",{className:"border-l-4 border-blue-500 pl-4",children:(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:a.owner.name}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:[a.owner.type," â€¢ ",a.owner.state,", ",a.owner.country]})]}),(0,l.jsx)("div",{className:"text-right",children:(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:[new Date(a.startDate).toLocaleDateString(),a.endDate&&` - ${new Date(a.endDate).toLocaleDateString()}`]})})]})},b))})]}),j.accidents.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Accident History"}),(0,l.jsx)("div",{className:"space-y-4",children:j.accidents.map((a,b)=>(0,l.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900",children:new Date(a.date).toLocaleDateString()}),(0,l.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:a.severity})]}),a.narrative&&(0,l.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:a.narrative}),(0,l.jsxs)("div",{className:"flex space-x-4 text-xs text-gray-600",children:[a.fatalities&&(0,l.jsxs)("span",{children:["Fatalities: ",a.fatalities]}),a.injuries&&(0,l.jsxs)("span",{children:["Injuries: ",a.injuries]})]})]},b))})]}),j.adDirectives.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Airworthiness Directives"}),(0,l.jsx)("div",{className:"space-y-4",children:j.adDirectives.map((a,b)=>(0,l.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900",children:a.ref}),(0,l.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${"OPEN"===a.status?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:a.status})]}),(0,l.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:a.summary}),(0,l.jsxs)("p",{className:"text-xs text-gray-600",children:["Effective: ",new Date(a.effectiveDate).toLocaleDateString()]})]},b))})]})]}),"live"===p&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(v,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Live Tracking"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Live tracking data is not currently available for this aircraft."})]})]})]})]})]}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Aircraft Not Found"}),(0,l.jsxs)("p",{className:"text-gray-600 mb-8",children:['The aircraft with tail number "',g,'" was not found in our database.']}),(0,l.jsx)(x,{href:"/",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700",children:"Back to Search"})]})})}let z=async a=>{let{tail:b}=a.params;try{let a={"x-api-key":"demo-api-key","Content-Type":"application/json"},[c,d]=await Promise.all([fetch(`http://192.168.3.1:3001/api/aircraft/${b}/summary`,{headers:a}),fetch(`http://192.168.3.1:3001/api/aircraft/${b}/history`,{headers:a})]),e=null,f=null;return c.ok&&(e=(await c.json()).summary),d.ok&&(f=(await d.json()).history),{props:{tail:b,initialSummary:e,initialHistory:f}}}catch(a){return console.error("Failed to fetch aircraft data on server:",a),{props:{tail:b,initialSummary:null,initialHistory:null}}}};var A=c(20690);let B=(0,g.M)(d,"default"),C=(0,g.M)(d,"getStaticProps"),D=(0,g.M)(d,"getStaticPaths"),E=(0,g.M)(d,"getServerSideProps"),F=(0,g.M)(d,"config"),G=(0,g.M)(d,"reportWebVitals"),H=(0,g.M)(d,"unstable_getStaticProps"),I=(0,g.M)(d,"unstable_getStaticPaths"),J=(0,g.M)(d,"unstable_getStaticParams"),K=(0,g.M)(d,"unstable_getServerProps"),L=(0,g.M)(d,"unstable_getServerSideProps"),M=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/aircraft/[tail]",pathname:"/aircraft/[tail]",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:d}),N=(0,A.U)({srcPage:"/aircraft/[tail]",config:F,userland:d,routeModule:M,getStaticPaths:D,getStaticProps:C,getServerSideProps:E})},22326:a=>{a.exports=require("react-dom")},27910:a=>{a.exports=require("stream")},29021:a=>{a.exports=require("fs")},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},74075:a=>{a.exports=require("zlib")},82015:a=>{a.exports=require("react")}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[203,167,902,923,604],()=>b(b.s=19437));module.exports=c})();