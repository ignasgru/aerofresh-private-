(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[788],{6377:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>j});var t=s(2548),l=s(6152),r=s(8132),i=s(7542),n=s(5645);let c=(0,n.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var d=s(7726);let x=(0,n.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var o=s(8705),m=s.n(o);let h=r.A,p=i.A,u=d.A,g=m();function j(){let[e,a]=(0,l.useState)(null),[s,r]=(0,l.useState)(!1),[i,n]=(0,l.useState)(null),[d,o]=(0,l.useState)({limit:50,minutes:30,latMin:"",latMax:"",lonMin:"",lonMax:""}),[m,j]=(0,l.useState)("all"),y=async()=>{r(!0),n(null);try{let e="http://192.168.3.1:3001/api/tracking/live",s=new URLSearchParams;"all"===m?(s.append("limit",d.limit.toString()),s.append("minutes",d.minutes.toString())):(e="http://192.168.3.1:3001/api/tracking/region",s.append("limit",d.limit.toString()),d.latMin&&s.append("latMin",d.latMin),d.latMax&&s.append("latMax",d.latMax),d.lonMin&&s.append("lonMin",d.lonMin),d.lonMax&&s.append("lonMax",d.lonMax));let t=await fetch("".concat(e,"?").concat(s.toString()),{headers:{"x-api-key":"demo-api-key","Content-Type":"application/json"}});if(!t.ok)throw Error("API Error: ".concat(t.status," ").concat(t.statusText));let l=await t.json();a(l)}catch(e){console.error("Failed to fetch live data:",e),n("Failed to fetch live data: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{r(!1)}};(0,l.useEffect)(()=>{y()},[]);let f=e=>new Date(e).toLocaleTimeString();return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(g,{href:"/",className:"flex items-center",children:[(0,t.jsx)(p,{className:"h-8 w-8 text-blue-600 mr-2"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"AeroFresh"})]})}),(0,t.jsxs)("nav",{className:"hidden md:flex space-x-8",children:[(0,t.jsx)(g,{href:"/",className:"text-gray-600 hover:text-gray-900",children:"Dashboard"}),(0,t.jsx)(g,{href:"/search",className:"text-gray-600 hover:text-gray-900",children:"Search"}),(0,t.jsx)(g,{href:"/live-tracking",className:"text-blue-600 font-semibold",children:"Live Tracking"})]})]})})}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Live Aircraft Tracking"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Real-time aircraft positions from ADS-B data sources"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(u,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"View Mode:"}),(0,t.jsxs)("select",{value:m,onChange:e=>j(e.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm","aria-label":"Select view mode",children:[(0,t.jsx)("option",{value:"all",children:"All Aircraft"}),(0,t.jsx)("option",{value:"region",children:"Regional View"})]})]}),"all"===m&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(x,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Time Range:"}),(0,t.jsxs)("select",{value:d.minutes,onChange:e=>o({...d,minutes:parseInt(e.target.value)}),className:"border border-gray-300 rounded-md px-3 py-1 text-sm","aria-label":"Select time range",children:[(0,t.jsx)("option",{value:5,children:"5 minutes"}),(0,t.jsx)("option",{value:15,children:"15 minutes"}),(0,t.jsx)("option",{value:30,children:"30 minutes"}),(0,t.jsx)("option",{value:60,children:"1 hour"}),(0,t.jsx)("option",{value:120,children:"2 hours"})]})]})}),"region"===m&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Region:"}),(0,t.jsx)("input",{type:"number",placeholder:"Lat Min",value:d.latMin,onChange:e=>o({...d,latMin:e.target.value}),className:"border border-gray-300 rounded-md px-2 py-1 text-sm w-20"}),(0,t.jsx)("input",{type:"number",placeholder:"Lat Max",value:d.latMax,onChange:e=>o({...d,latMax:e.target.value}),className:"border border-gray-300 rounded-md px-2 py-1 text-sm w-20"}),(0,t.jsx)("input",{type:"number",placeholder:"Lon Min",value:d.lonMin,onChange:e=>o({...d,lonMin:e.target.value}),className:"border border-gray-300 rounded-md px-2 py-1 text-sm w-20"}),(0,t.jsx)("input",{type:"number",placeholder:"Lon Max",value:d.lonMax,onChange:e=>o({...d,lonMax:e.target.value}),className:"border border-gray-300 rounded-md px-2 py-1 text-sm w-20"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Limit:"}),(0,t.jsxs)("select",{value:d.limit,onChange:e=>o({...d,limit:parseInt(e.target.value)}),className:"border border-gray-300 rounded-md px-3 py-1 text-sm","aria-label":"Select number of results to display",children:[(0,t.jsx)("option",{value:25,children:"25"}),(0,t.jsx)("option",{value:50,children:"50"}),(0,t.jsx)("option",{value:100,children:"100"}),(0,t.jsx)("option",{value:200,children:"200"})]})]}),(0,t.jsxs)("button",{onClick:y,disabled:s,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2",children:[(0,t.jsx)(c,{className:"h-4 w-4 ".concat(s?"animate-spin":"")}),(0,t.jsx)("span",{children:s?"Loading...":"Refresh"})]})]}),e&&(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",e.count," aircraft • Last updated: ",f(e.lastUpdate)," • Time range: ",e.timeRange]})]}),i&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:i}),s&&!e&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading live aircraft data..."})]}),e&&e.positions.length>0&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.positions.map(e=>{let a,s;return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(p,{className:"h-6 w-6 text-blue-600 mr-2"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.tail}),e.aircraft&&(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.aircraft.make," ",e.aircraft.model," (",e.aircraft.year,")"]})]})]}),(0,t.jsx)(g,{href:"/aircraft/".concat(e.tail),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View Details"})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Position:"}),(0,t.jsxs)("span",{className:"font-mono",children:[e.lat.toFixed(4),", ",e.lon.toFixed(4)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Altitude:"}),(0,t.jsx)("span",{children:(a=e.alt,"".concat(Math.round(3.28084*a)," ft"))})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Speed:"}),(0,t.jsx)("span",{children:(s=e.speed,"".concat(Math.round(1.94384*s)," kts"))})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Heading:"}),(0,t.jsxs)("span",{children:[e.heading.toFixed(0),"\xb0 ",["N","NE","E","SE","S","SW","W","NW"][Math.round(e.heading/45)%8]]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Last Update:"}),(0,t.jsx)("span",{children:f(e.ts)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Source:"}),(0,t.jsx)("span",{className:"capitalize",children:e.src})]})]})]},e.id)})}),e&&0===e.positions.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(p,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Aircraft Found"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No aircraft positions found for the selected criteria. Try adjusting your filters."})]})]})]})}},7726:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(5645).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},8132:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(5645).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9367:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/live-tracking",function(){return s(6377)}])}},e=>{e.O(0,[292,636,593,792],()=>e(e.s=9367)),_N_E=e.O()}]);